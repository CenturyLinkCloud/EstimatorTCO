(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var PricingMapsCollection, PricingModel;

PricingModel = require('../models/PricingMapModel.coffee');

PricingMapsCollection = Backbone.Collection.extend({
  model: PricingModel,
  url: "json/pricing.json",
  initialize: function() {
    return this.fetch();
  },
  forKey: function(type) {
    return _.first(this.where({
      "type": type
    }));
  }
});

module.exports = PricingMapsCollection;


},{"../models/PricingMapModel.coffee":2}],2:[function(require,module,exports){
var PricingMapModel;

PricingMapModel = Backbone.Model.extend({
  initialize: function() {}
});

module.exports = PricingMapModel;


},{}],3:[function(require,module,exports){
var ServerModel;

ServerModel = Backbone.Model.extend({
  HOURS_PER_DAY: "hours_per_day",
  HOURS_PER_WEEK: "hours_per_week",
  HOURS_PER_MONTH: "hours_per_month",
  PERCENTAGE_OF_MONTH: "percentage_of_month",
  HOURS_IN_MONTH: 730,
  DAYS_IN_MONTH: 30.41666667,
  WEEKS_IN_MONTH: 4.345238095,
  defaults: {
    type: "standard",
    os: "linux",
    cpu: 1,
    memory: 1,
    storage: 1,
    quantity: 1,
    usagePeriod: "percentage_of_month",
    usage: 100
  },
  initialize: function() {
    return this.initPricing();
  },
  initPricing: function() {
    var pricing;
    pricing = this.get("pricingMap").attributes.options;
    return this.set("pricing", pricing);
  },
  totalCpuPerHour: function() {
    return this.get("cpu") * this.get("pricing").cpu;
  },
  totalMemoryPerHour: function() {
    return this.get("memory") * this.get("pricing").memory;
  },
  totalOSPerHour: function() {
    return this.get("pricing").os[this.get("os")] * this.get("cpu");
  },
  utilityPricePerHourPerInstance: function() {
    return this.totalCpuPerHour() + this.totalMemoryPerHour() + this.totalOSPerHour();
  },
  utilityPricePerHourTotal: function() {
    return this.utilityPricePerHourPerInstance() * this.get("quantity");
  },
  storagePricePerMonth: function() {
    var type;
    type = this.get("type");
    return this.get("storage") * this.get("pricing").storage[type] * this.get("quantity");
  },
  totalOSPricePerMonth: function() {
    switch (this.get("usagePeriod")) {
      case this.HOURS_PER_DAY:
        return this.totalOSPerHour() * this.get("usage") * this.DAYS_IN_MONTH;
      case this.HOURS_PER_WEEK:
        return this.totalOSPerHour() * this.get("usage") * this.WEEKS_IN_MONTH;
      case this.HOURS_PER_MONTH:
        return this.totalOSPerHour() * this.get("usage");
      case this.PERCENTAGE_OF_MONTH:
        return this.get("usage") / 100 * this.HOURS_IN_MONTH * this.totalOSPerHour();
    }
  },
  totalPricePerMonth: function() {
    var utilityPerMonth;
    utilityPerMonth = 0;
    switch (this.get("usagePeriod")) {
      case this.HOURS_PER_DAY:
        utilityPerMonth = this.utilityPricePerHourTotal() * this.get("usage") * this.DAYS_IN_MONTH;
        break;
      case this.HOURS_PER_WEEK:
        utilityPerMonth = this.utilityPricePerHourTotal() * this.get("usage") * this.WEEKS_IN_MONTH;
        break;
      case this.HOURS_PER_MONTH:
        utilityPerMonth = this.utilityPricePerHourTotal() * this.get("usage");
        break;
      case this.PERCENTAGE_OF_MONTH:
        utilityPerMonth = this.get("usage") / 100 * this.HOURS_IN_MONTH * this.utilityPricePerHourTotal();
    }
    return utilityPerMonth + this.storagePricePerMonth();
  }
});

module.exports = ServerModel;


},{}],4:[function(require,module,exports){
require('./spec/ServerModelSpec.coffee');


},{"./spec/ServerModelSpec.coffee":5}],5:[function(require,module,exports){
var PricingMapsCollection, ServerModel;

ServerModel = require('../../source/js/app/models/ServerModel.coffee');

PricingMapsCollection = require('../../source/js/app/collections/PricingMapsCollection.coffee');

describe('Server', function() {
  it('should exist', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        expect(server).to.exist;
        return done();
      });
    };
  })(this));
  it('should calculate CPU price per hour', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        expect(server.totalCpuPerHour()).to.equal(0.01);
        server.set("cpu", 2);
        expect(server.totalCpuPerHour()).to.equal(0.02);
        return done();
      });
    };
  })(this));
  it('should calculate memory price per hour', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        expect(server.totalMemoryPerHour()).to.equal(0.015);
        server.set("memory", 2);
        expect(server.totalMemoryPerHour()).to.equal(0.03);
        return done();
      });
    };
  })(this));
  it('should calculate os price per hour', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        expect(server.totalOSPerHour()).to.equal(0);
        server.set("os", "windows");
        expect(server.totalOSPerHour()).to.equal(0.04);
        server.set("os", "redhat");
        expect(server.totalOSPerHour()).to.equal(0.04);
        return done();
      });
    };
  })(this));
  it('should calculate utility price per hour per instance', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        expect(server.utilityPricePerHourPerInstance()).to.equal(0.025);
        return done();
      });
    };
  })(this));
  it('should calculate utility price per hour', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        server.set("quantity", 2);
        expect(server.utilityPricePerHourTotal()).to.equal(0.05);
        return done();
      });
    };
  })(this));
  it('should calculate storage price per month', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        expect(server.storagePricePerMonth()).to.equal(0.15);
        server.set("storage", 200);
        server.set("type", "premium");
        expect(server.storagePricePerMonth()).to.equal(100);
        return done();
      });
    };
  })(this));
  return it('should calculate total price per month', (function(_this) {
    return function(done) {
      var pricingMaps;
      pricingMaps = new PricingMapsCollection();
      return pricingMaps.on("sync", function() {
        var server, serverPricingMap;
        serverPricingMap = pricingMaps.forKey("server");
        server = new ServerModel({
          pricingMap: serverPricingMap
        });
        expect(server.totalPricePerMonth()).to.equal(18.15);
        return done();
      });
    };
  })(this));
});


},{"../../source/js/app/collections/PricingMapsCollection.coffee":1,"../../source/js/app/models/ServerModel.coffee":3}]},{},[4])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvVXNlcnMvbWF0dC9Xb3JrL3RpZXIzL2RldmVsb3BtZW50L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvbWF0dC9Xb3JrL3RpZXIzL2RldmVsb3BtZW50L3NvdXJjZS9qcy9hcHAvY29sbGVjdGlvbnMvUHJpY2luZ01hcHNDb2xsZWN0aW9uLmNvZmZlZSIsIi9Vc2Vycy9tYXR0L1dvcmsvdGllcjMvZGV2ZWxvcG1lbnQvc291cmNlL2pzL2FwcC9tb2RlbHMvUHJpY2luZ01hcE1vZGVsLmNvZmZlZSIsIi9Vc2Vycy9tYXR0L1dvcmsvdGllcjMvZGV2ZWxvcG1lbnQvc291cmNlL2pzL2FwcC9tb2RlbHMvU2VydmVyTW9kZWwuY29mZmVlIiwiL1VzZXJzL21hdHQvV29yay90aWVyMy9kZXZlbG9wbWVudC90ZXN0L3NwZWMtcnVubmVyLmNvZmZlZSIsIi9Vc2Vycy9tYXR0L1dvcmsvdGllcjMvZGV2ZWxvcG1lbnQvdGVzdC9zcGVjL1NlcnZlck1vZGVsU3BlYy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLG1DQUFBOztBQUFBLFlBQUEsR0FBZSxPQUFBLENBQVEsa0NBQVIsQ0FBZixDQUFBOztBQUFBLHFCQUVBLEdBQXdCLFFBQVEsQ0FBQyxVQUFVLENBQUMsTUFBcEIsQ0FDdEI7QUFBQSxFQUFBLEtBQUEsRUFBTyxZQUFQO0FBQUEsRUFDQSxHQUFBLEVBQUssbUJBREw7QUFBQSxFQUdBLFVBQUEsRUFBWSxTQUFBLEdBQUE7V0FDVixJQUFDLENBQUEsS0FBRCxDQUFBLEVBRFU7RUFBQSxDQUhaO0FBQUEsRUFNQSxNQUFBLEVBQVEsU0FBQyxJQUFELEdBQUE7V0FDTixDQUFDLENBQUMsS0FBRixDQUFRLElBQUMsQ0FBQSxLQUFELENBQU87QUFBQSxNQUFBLE1BQUEsRUFBUSxJQUFSO0tBQVAsQ0FBUixF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QUNyQixZQUFBLHdCQUFBO0FBQUEsUUFBQSxnQkFBQSxHQUFvQixXQUFXLENBQUMsTUFBWixDQUFtQixRQUFuQixDQUFwQixDQUFBO0FBQUEsUUFDQSxNQUFBLEdBQWEsSUFBQSxXQUFBLENBQVk7QUFBQSxVQUFBLFVBQUEsRUFBWSxnQkFBWjtTQUFaLENBRGIsQ0FBQTtBQUFBLFFBRUEsTUFBQSxDQUFPLE1BQU0sQ0FBQyxrQkFBUCxDQUFBLENBQVAsQ0FBbUMsQ0FBQyxFQUFFLENBQUMsS0FBdkMsQ0FBNkMsS0FBN0MsQ0FGQSxDQUFBO2VBR0EsSUFBQSxDQUFBLEVBSnFCO01BQUEsQ0FBdkIsRUFGMkM7SUFBQSxFQUFBO0VBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE3QyxFQTdFaUI7QUFBQSxDQUFuQixDQUhBLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlByaWNpbmdNb2RlbCA9IHJlcXVpcmUgJy4uL21vZGVscy9QcmljaW5nTWFwTW9kZWwuY29mZmVlJ1xuXG5QcmljaW5nTWFwc0NvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZFxuICBtb2RlbDogUHJpY2luZ01vZGVsXG4gIHVybDogXCJqc29uL3ByaWNpbmcuanNvblwiXG5cbiAgaW5pdGlhbGl6ZTogLT5cbiAgICBAZmV0Y2goKVxuXG4gIGZvcktleTogKHR5cGUpIC0+XG4gICAgXy5maXJzdCBAd2hlcmUoXCJ0eXBlXCI6IHR5cGUpXG5cbm1vZHVsZS5leHBvcnRzID0gUHJpY2luZ01hcHNDb2xsZWN0aW9uIiwiUHJpY2luZ01hcE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kXG5cbiAgaW5pdGlhbGl6ZTogLT5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IFByaWNpbmdNYXBNb2RlbCIsIlNlcnZlck1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kXG4gICAgXG4gIEhPVVJTX1BFUl9EQVk6IFwiaG91cnNfcGVyX2RheVwiXG4gIEhPVVJTX1BFUl9XRUVLOiBcImhvdXJzX3Blcl93ZWVrXCJcbiAgSE9VUlNfUEVSX01PTlRIOiBcImhvdXJzX3Blcl9tb250aFwiXG4gIFBFUkNFTlRBR0VfT0ZfTU9OVEg6IFwicGVyY2VudGFnZV9vZl9tb250aFwiXG5cbiAgSE9VUlNfSU5fTU9OVEg6IDczMFxuICBEQVlTX0lOX01PTlRIOiAzMC40MTY2NjY2N1xuICBXRUVLU19JTl9NT05USDogNC4zNDUyMzgwOTVcblxuICBkZWZhdWx0czpcbiAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICBvczogXCJsaW51eFwiXG4gICAgY3B1OiAxXG4gICAgbWVtb3J5OiAxXG4gICAgc3RvcmFnZTogMVxuICAgIHF1YW50aXR5OiAxXG4gICAgdXNhZ2VQZXJpb2Q6IFwicGVyY2VudGFnZV9vZl9tb250aFwiXG4gICAgdXNhZ2U6IDEwMFxuXG4gIGluaXRpYWxpemU6IC0+XG4gICAgQGluaXRQcmljaW5nKClcblxuICBpbml0UHJpY2luZzogLT5cbiAgICBwcmljaW5nID0gQC5nZXQoXCJwcmljaW5nTWFwXCIpLmF0dHJpYnV0ZXMub3B0aW9uc1xuICAgIEAuc2V0KFwicHJpY2luZ1wiLCBwcmljaW5nKVxuXG4gIHRvdGFsQ3B1UGVySG91cjogLT4gIFxuICAgIEAuZ2V0KFwiY3B1XCIpICogQC5nZXQoXCJwcmljaW5nXCIpLmNwdVxuXG4gIHRvdGFsTWVtb3J5UGVySG91cjogLT4gIFxuICAgIEAuZ2V0KFwibWVtb3J5XCIpICogQC5nZXQoXCJwcmljaW5nXCIpLm1lbW9yeSAgXG5cbiAgdG90YWxPU1BlckhvdXI6IC0+ICBcbiAgICBALmdldChcInByaWNpbmdcIikub3NbQC5nZXQoXCJvc1wiKV0gKiBALmdldChcImNwdVwiKVxuXG4gIHV0aWxpdHlQcmljZVBlckhvdXJQZXJJbnN0YW5jZTogLT5cbiAgICBAdG90YWxDcHVQZXJIb3VyKCkgKyBAdG90YWxNZW1vcnlQZXJIb3VyKCkgKyBAdG90YWxPU1BlckhvdXIoKVxuXG4gIHV0aWxpdHlQcmljZVBlckhvdXJUb3RhbDogLT5cbiAgICBAdXRpbGl0eVByaWNlUGVySG91clBlckluc3RhbmNlKCkgKiBALmdldChcInF1YW50aXR5XCIpXG5cbiAgc3RvcmFnZVByaWNlUGVyTW9udGg6IC0+XG4gICAgdHlwZSA9IEAuZ2V0KFwidHlwZVwiKVxuICAgIEAuZ2V0KFwic3RvcmFnZVwiKSAqIEAuZ2V0KFwicHJpY2luZ1wiKS5zdG9yYWdlW3R5cGVdICogQC5nZXQoXCJxdWFudGl0eVwiKVxuXG4gIHRvdGFsT1NQcmljZVBlck1vbnRoOiAtPlxuICAgIHN3aXRjaCBALmdldChcInVzYWdlUGVyaW9kXCIpXG4gICAgICB3aGVuIEBIT1VSU19QRVJfREFZXG4gICAgICAgIHJldHVybiBAdG90YWxPU1BlckhvdXIoKSAqIEAuZ2V0KFwidXNhZ2VcIikgKiBAREFZU19JTl9NT05USFxuICAgICAgd2hlbiBASE9VUlNfUEVSX1dFRUtcbiAgICAgICAgcmV0dXJuIEB0b3RhbE9TUGVySG91cigpICogQC5nZXQoXCJ1c2FnZVwiKSAqIEBXRUVLU19JTl9NT05USFxuICAgICAgd2hlbiBASE9VUlNfUEVSX01PTlRIXG4gICAgICAgIHJldHVybiBAdG90YWxPU1BlckhvdXIoKSAqIEAuZ2V0KFwidXNhZ2VcIilcbiAgICAgIHdoZW4gQFBFUkNFTlRBR0VfT0ZfTU9OVEhcbiAgICAgICAgcmV0dXJuIEAuZ2V0KFwidXNhZ2VcIikgLyAxMDAgKiBASE9VUlNfSU5fTU9OVEggKiBAdG90YWxPU1BlckhvdXIoKVxuXG4gIHRvdGFsUHJpY2VQZXJNb250aDogLT5cbiAgICB1dGlsaXR5UGVyTW9udGggPSAwXG4gICAgc3dpdGNoIEAuZ2V0KFwidXNhZ2VQZXJpb2RcIilcbiAgICAgIHdoZW4gQEhPVVJTX1BFUl9EQVlcbiAgICAgICAgdXRpbGl0eVBlck1vbnRoID0gQHV0aWxpdHlQcmljZVBlckhvdXJUb3RhbCgpICogQC5nZXQoXCJ1c2FnZVwiKSAqIEBEQVlTX0lOX01PTlRIXG4gICAgICB3aGVuIEBIT1VSU19QRVJfV0VFS1xuICAgICAgICB1dGlsaXR5UGVyTW9udGggPSBAdXRpbGl0eVByaWNlUGVySG91clRvdGFsKCkgKiBALmdldChcInVzYWdlXCIpICogQFdFRUtTX0lOX01PTlRIXG4gICAgICB3aGVuIEBIT1VSU19QRVJfTU9OVEhcbiAgICAgICAgdXRpbGl0eVBlck1vbnRoID0gQHV0aWxpdHlQcmljZVBlckhvdXJUb3RhbCgpICogQC5nZXQoXCJ1c2FnZVwiKVxuICAgICAgd2hlbiBAUEVSQ0VOVEFHRV9PRl9NT05USFxuICAgICAgICB1dGlsaXR5UGVyTW9udGggPSBALmdldChcInVzYWdlXCIpIC8gMTAwICogQEhPVVJTX0lOX01PTlRIICogQHV0aWxpdHlQcmljZVBlckhvdXJUb3RhbCgpXG4gICAgcmV0dXJuIHV0aWxpdHlQZXJNb250aCArIEBzdG9yYWdlUHJpY2VQZXJNb250aCgpXG5cbm1vZHVsZS5leHBvcnRzID0gU2VydmVyTW9kZWxcbiIsInJlcXVpcmUgJy4vc3BlYy9TZXJ2ZXJNb2RlbFNwZWMuY29mZmVlJyIsIlNlcnZlck1vZGVsID0gcmVxdWlyZSAnLi4vLi4vc291cmNlL2pzL2FwcC9tb2RlbHMvU2VydmVyTW9kZWwuY29mZmVlJ1xuUHJpY2luZ01hcHNDb2xsZWN0aW9uID0gcmVxdWlyZSAnLi4vLi4vc291cmNlL2pzL2FwcC9jb2xsZWN0aW9ucy9QcmljaW5nTWFwc0NvbGxlY3Rpb24uY29mZmVlJ1xuXG5kZXNjcmliZSAnU2VydmVyJywgLT5cbiAgXG4gIGl0ICdzaG91bGQgZXhpc3QnLCAoZG9uZSkgPT4gICAgXG4gICAgcHJpY2luZ01hcHMgPSBuZXcgUHJpY2luZ01hcHNDb2xsZWN0aW9uKClcbiAgICBwcmljaW5nTWFwcy5vbiBcInN5bmNcIiwgPT5cbiAgICAgIHNlcnZlclByaWNpbmdNYXAgPSAgcHJpY2luZ01hcHMuZm9yS2V5IFwic2VydmVyXCJcbiAgICAgIHNlcnZlciA9IG5ldyBTZXJ2ZXJNb2RlbChwcmljaW5nTWFwOiBzZXJ2ZXJQcmljaW5nTWFwKVxuICAgICAgZXhwZWN0KHNlcnZlcikudG8uZXhpc3RcbiAgICAgIGRvbmUoKVxuXG4gIGl0ICdzaG91bGQgY2FsY3VsYXRlIENQVSBwcmljZSBwZXIgaG91cicsIChkb25lKSA9PlxuICAgIHByaWNpbmdNYXBzID0gbmV3IFByaWNpbmdNYXBzQ29sbGVjdGlvbigpXG4gICAgcHJpY2luZ01hcHMub24gXCJzeW5jXCIsID0+XG4gICAgICBzZXJ2ZXJQcmljaW5nTWFwID0gIHByaWNpbmdNYXBzLmZvcktleSBcInNlcnZlclwiXG4gICAgICBzZXJ2ZXIgPSBuZXcgU2VydmVyTW9kZWwocHJpY2luZ01hcDogc2VydmVyUHJpY2luZ01hcClcbiAgICAgIGV4cGVjdChzZXJ2ZXIudG90YWxDcHVQZXJIb3VyKCkpLnRvLmVxdWFsKDAuMDEpXG5cbiAgICAgIHNlcnZlci5zZXQoXCJjcHVcIiwgMilcbiAgICAgIGV4cGVjdChzZXJ2ZXIudG90YWxDcHVQZXJIb3VyKCkpLnRvLmVxdWFsKDAuMDIpXG5cbiAgICAgIGRvbmUoKVxuXG4gIGl0ICdzaG91bGQgY2FsY3VsYXRlIG1lbW9yeSBwcmljZSBwZXIgaG91cicsIChkb25lKSA9PlxuICAgIHByaWNpbmdNYXBzID0gbmV3IFByaWNpbmdNYXBzQ29sbGVjdGlvbigpXG4gICAgcHJpY2luZ01hcHMub24gXCJzeW5jXCIsID0+XG4gICAgICBzZXJ2ZXJQcmljaW5nTWFwID0gIHByaWNpbmdNYXBzLmZvcktleSBcInNlcnZlclwiXG4gICAgICBzZXJ2ZXIgPSBuZXcgU2VydmVyTW9kZWwocHJpY2luZ01hcDogc2VydmVyUHJpY2luZ01hcClcbiAgICAgIGV4cGVjdChzZXJ2ZXIudG90YWxNZW1vcnlQZXJIb3VyKCkpLnRvLmVxdWFsKDAuMDE1KVxuXG4gICAgICBzZXJ2ZXIuc2V0KFwibWVtb3J5XCIsIDIpXG4gICAgICBleHBlY3Qoc2VydmVyLnRvdGFsTWVtb3J5UGVySG91cigpKS50by5lcXVhbCgwLjAzKVxuICAgICAgZG9uZSgpXG5cbiAgaXQgJ3Nob3VsZCBjYWxjdWxhdGUgb3MgcHJpY2UgcGVyIGhvdXInLCAoZG9uZSkgPT5cbiAgICBwcmljaW5nTWFwcyA9IG5ldyBQcmljaW5nTWFwc0NvbGxlY3Rpb24oKVxuICAgIHByaWNpbmdNYXBzLm9uIFwic3luY1wiLCA9PlxuICAgICAgc2VydmVyUHJpY2luZ01hcCA9ICBwcmljaW5nTWFwcy5mb3JLZXkgXCJzZXJ2ZXJcIlxuICAgICAgc2VydmVyID0gbmV3IFNlcnZlck1vZGVsKHByaWNpbmdNYXA6IHNlcnZlclByaWNpbmdNYXApXG4gICAgICBcbiAgICAgIGV4cGVjdChzZXJ2ZXIudG90YWxPU1BlckhvdXIoKSkudG8uZXF1YWwoMClcbiAgICAgIFxuICAgICAgc2VydmVyLnNldChcIm9zXCIsIFwid2luZG93c1wiKVxuICAgICAgZXhwZWN0KHNlcnZlci50b3RhbE9TUGVySG91cigpKS50by5lcXVhbCgwLjA0KVxuICAgICAgXG4gICAgICBzZXJ2ZXIuc2V0KFwib3NcIiwgXCJyZWRoYXRcIilcbiAgICAgIGV4cGVjdChzZXJ2ZXIudG90YWxPU1BlckhvdXIoKSkudG8uZXF1YWwoMC4wNClcblxuICAgICAgZG9uZSgpXG5cbiAgaXQgJ3Nob3VsZCBjYWxjdWxhdGUgdXRpbGl0eSBwcmljZSBwZXIgaG91ciBwZXIgaW5zdGFuY2UnLCAoZG9uZSkgPT5cbiAgICBwcmljaW5nTWFwcyA9IG5ldyBQcmljaW5nTWFwc0NvbGxlY3Rpb24oKVxuICAgIHByaWNpbmdNYXBzLm9uIFwic3luY1wiLCA9PlxuICAgICAgc2VydmVyUHJpY2luZ01hcCA9ICBwcmljaW5nTWFwcy5mb3JLZXkgXCJzZXJ2ZXJcIlxuICAgICAgc2VydmVyID0gbmV3IFNlcnZlck1vZGVsKHByaWNpbmdNYXA6IHNlcnZlclByaWNpbmdNYXApXG4gICAgICBleHBlY3Qoc2VydmVyLnV0aWxpdHlQcmljZVBlckhvdXJQZXJJbnN0YW5jZSgpKS50by5lcXVhbCgwLjAyNSlcbiAgICAgIGRvbmUoKVxuXG4gIGl0ICdzaG91bGQgY2FsY3VsYXRlIHV0aWxpdHkgcHJpY2UgcGVyIGhvdXInLCAoZG9uZSkgPT5cbiAgICBwcmljaW5nTWFwcyA9IG5ldyBQcmljaW5nTWFwc0NvbGxlY3Rpb24oKVxuICAgIHByaWNpbmdNYXBzLm9uIFwic3luY1wiLCA9PlxuICAgICAgc2VydmVyUHJpY2luZ01hcCA9ICBwcmljaW5nTWFwcy5mb3JLZXkgXCJzZXJ2ZXJcIlxuICAgICAgc2VydmVyID0gbmV3IFNlcnZlck1vZGVsKHByaWNpbmdNYXA6IHNlcnZlclByaWNpbmdNYXApXG4gICAgICBzZXJ2ZXIuc2V0KFwicXVhbnRpdHlcIiwgMikgICAgICBcbiAgICAgIGV4cGVjdChzZXJ2ZXIudXRpbGl0eVByaWNlUGVySG91clRvdGFsKCkpLnRvLmVxdWFsKDAuMDUpXG4gICAgICBkb25lKClcblxuICBpdCAnc2hvdWxkIGNhbGN1bGF0ZSBzdG9yYWdlIHByaWNlIHBlciBtb250aCcsIChkb25lKSA9PlxuICAgIHByaWNpbmdNYXBzID0gbmV3IFByaWNpbmdNYXBzQ29sbGVjdGlvbigpXG4gICAgcHJpY2luZ01hcHMub24gXCJzeW5jXCIsID0+XG4gICAgICBzZXJ2ZXJQcmljaW5nTWFwID0gIHByaWNpbmdNYXBzLmZvcktleSBcInNlcnZlclwiXG4gICAgICBzZXJ2ZXIgPSBuZXcgU2VydmVyTW9kZWwocHJpY2luZ01hcDogc2VydmVyUHJpY2luZ01hcClcbiAgICAgIGV4cGVjdChzZXJ2ZXIuc3RvcmFnZVByaWNlUGVyTW9udGgoKSkudG8uZXF1YWwoMC4xNSlcbiAgICAgIHNlcnZlci5zZXQoXCJzdG9yYWdlXCIsIDIwMClcbiAgICAgIHNlcnZlci5zZXQoXCJ0eXBlXCIsIFwicHJlbWl1bVwiKVxuICAgICAgZXhwZWN0KHNlcnZlci5zdG9yYWdlUHJpY2VQZXJNb250aCgpKS50by5lcXVhbCgxMDApXG4gICAgICBkb25lKClcblxuICBpdCAnc2hvdWxkIGNhbGN1bGF0ZSB0b3RhbCBwcmljZSBwZXIgbW9udGgnLCAoZG9uZSkgPT5cbiAgICBwcmljaW5nTWFwcyA9IG5ldyBQcmljaW5nTWFwc0NvbGxlY3Rpb24oKVxuICAgIHByaWNpbmdNYXBzLm9uIFwic3luY1wiLCA9PlxuICAgICAgc2VydmVyUHJpY2luZ01hcCA9ICBwcmljaW5nTWFwcy5mb3JLZXkgXCJzZXJ2ZXJcIlxuICAgICAgc2VydmVyID0gbmV3IFNlcnZlck1vZGVsKHByaWNpbmdNYXA6IHNlcnZlclByaWNpbmdNYXApXG4gICAgICBleHBlY3Qoc2VydmVyLnRvdGFsUHJpY2VQZXJNb250aCgpKS50by5lcXVhbCgxOC4xNSlcbiAgICAgIGRvbmUoKVxuIl19
